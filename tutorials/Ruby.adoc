``` ruby
with_options only: 'show' do |option|
end

constraints subdomain: 'api' do
end

namespace :api, path: '/' do
end
```

``` ruby
destroy => 204
```

```ruby
[*(1)]
[*([0, 1, 2])]

('R'..'b').to_a
(0...10).to_a
```

```ruby
0.negative?
1.positive?

{}.to_h
{}.is_a?(Hash)

1&.negative?
```

```ruby
%w{negative 0 positive}
%i{negative 0 positive}
%I{negative #{0} positive}
```

```ruby
JSON.pretty_generate({})
```

```ruby
String.new.concat(':)')
String.new(')').prepend(':')
```

```ruby
fun = -> (n) { return [n] }
fun.call(0)
```

```ruby
def stars(x, *y, **z)
  return x, y, z
end

stars(0, 1, 2, { count: 3 })
```

```ruby
RSpec.configure do |config|
  config.include Devise::TestHelpers, type: 'controller'
end
```

```ruby
module Macros
  module ControllerHelper
    def sign_in_user
      before(:each) do
        @request.env['devise.mapping'] = Devise.mappings[user]
        sign_in FactoryGirl.create(user)
      end
    end
  end
end
```

```ruby
RSpec.configure do |config|
  config.extend Macros::ControllerHelper, type: 'controller'
end
```

=== Active Record

```ruby
User.column_names
User.columns_hash['name']
User.ignored_columns
```

```ruby
user.errors.details
user.save(touch: false)
```

```ruby
class User < ActiveRecord::Base
  has_many :orders
  has_many :paid_orders, -> { user_paid }, class_name: 'Order'
end

class Order < ActiveRecord::Base
  belongs_to :user
  scope :user_paid, -> { where(status: 'paid') }
end
```

=== 有用的 Snippets

```ruby
ActiveSupport::Autoload
ActionView::Helpers::FormBuilder
```

```ruby
/\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]+\z/
```

```ruby
trade_no = -> (n) { return n.strftime('%Y%m%d%H%M%S') + n.nsec.to_s }
trade_no.call(Time.now).ljust(24, rand(10).to_s)
```

```ruby
namespace :user do
  desc "Task description"
  task :create, [:name] => [:environment] do |t, args|
  end
end
```

=== Action Controller

```ruby
params.require(:user).permit(:name, { followers_ids: [] })
```

```ruby
render json: users, except: [], include: { followers: { only: 'id' } }
```

=== Active Support

```ruby
[0, 1].without(1)
[{ id: 1 }].pluck(:id)
```

```ruby
{ x: 0, y: 1, z: nil }.compact
{ x: 0, y: 1, z: nil }.compact!
```

```ruby
ActiveSupport::ArrayInquirer
ActiveSupport::Dependencies.autoload_paths
ActiveSupport::TimeZone.country_zones('kr').map(&:to_s)
```

=== 有用的命令行

```
rails routes -g users
rails routes -g DELETE
rails routes -g api/users
rails routes -g API::UsersController
```

```ruby
include Rails::ConsoleMethods

reload!

app.class
app.get '/'
app.users_path
app.method(:get).source_location
```

```ruby
helper.strip_tags(helper.time_tag(Time.new))
```
